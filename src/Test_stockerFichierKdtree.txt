#include <QCoreApplication>
#include<QDebug>
#include<QDir>
#include<QFileInfo>
#include<QString>
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
#include <math.h>
#include <windows.h>


using namespace std;
int main(int argc, char *argv[])
{

    int t1[3];
    int a = 78, i,v1[15][3];
    double b = 9.87;
    char c = 'W';
    string s;
    // lecture d'un fichier txt
    ifstream f ("E:/Test/toto.txt");

    if (!f.is_open())
        cout << "Impossible d'ouvrir le fichier en lecture !" << endl;
    else
    {

        for (i = 0; i < 15; i++)
            for (int k = 0; k < 3; k++)
                f >> v1[i][k];   // Affectation des valeurs du fichier txt à la matrice v1
    }
    f.close();

    // Lecture de la matrice v1
    for (i = 0; i < 15; i++){
        for (int k = 0; k < 3; k++){
            cout <<  v1[i][k] <<"\t";

        }
        cout << "\n";
    }

    // trie par premiere colonne
    for(i=0;i<15;i++)
        for(int k=i;k<15;k++) {

            {

                if(v1[i][0]>v1[k][0])
                {

                    t1[0]=v1[i][0];
                    t1[1]=v1[i][1];
                    t1[2]=v1[i][2];
                    v1[i][0]=v1[k][0];
                    v1[i][1]=v1[k][1];
                    v1[i][2]=v1[k][2];
                    v1[k][0]=t1[0];
                    v1[k][1]=t1[1];
                    v1[k][2]=t1[2];

                }

            }
        }

    //Affichage de la matrice triée
    for(i=0;i<15;i++) {
        printf("\n");
        for(int j=0;j<3;j++) {
            printf("\t%d",v1[i][j]);
        }
    }



    //Calcul de la mediane de la premiere colonne
    int n = 15;

    if(n%2 == 0) // Erreur
    {
        int i=n/2;
        cout << "Mediae == " << (v1[i-1][0]+ v1[i][0])/2 << endl;
    }

    else
    {
        int c=floor(n/2);
        cout << "Mediane == " << v1[c][0] << endl;
        cout << "indice mediane == " << c << endl;

    }


    //creation des repertoires et sous repertoires

    for (int j1=1;j1<3;j1++)
    {
        QString Path;
        Path = QString("E:/Test/k/k1/k%1").arg(j1);

        QDir mdir(Path);


        if(!mdir.exists(Path))
        {
            mdir.mkpath(Path);
            qDebug()<<"Created";
        }
        else
        {
            qDebug()<<"Already exists";
        }




        Path +="/toto1.txt";
        const char* c= Path.toStdString().c_str(); //Convertion du Qstring to char*
        //creation de fichier de points
        ofstream f(c);
        if (!f.is_open())
            cout << " Impossible d'ouvrir le fichier en écriture !" << endl;
        else
        {
            if (j1==1)
            {for (i = 0; i <7; i++)

                    f << v1[i][0] <<" "<<v1[i][1]<<" "<<v1[i][2]<<"\n";
            }
            else
            {
                for (i = 8; i <15; i++)

                    f << v1[i][0] <<" "<<v1[i][1]<<" "<<v1[i][2]<<"\n";
            }

            f.close();

        }
        Path="/0";
    }
    return 0;
}
